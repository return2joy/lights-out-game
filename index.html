<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>💡 반짝반짝 패턴 게임 (Lights Out)</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- 닉네임 입력 화면 -->
    <div id="nickname-screen" class="screen active">
        <div class="screen-content">
            <h1>💡 반짝반짝 패턴 게임</h1>
            <p class="subtitle">어린이용 두뇌 개발 퍼즐</p>
            <div class="nickname-form">
                <label for="nickname-input">닉네임을 입력하세요</label>
                <input type="text" id="nickname-input" maxlength="12" placeholder="닉네임..." autocomplete="off">
                <button id="start-btn" class="btn btn-primary">게임 시작!</button>
            </div>
        </div>
    </div>

    <!-- 메인 메뉴 화면 -->
    <div id="menu-screen" class="screen">
        <div class="screen-content">
            <h1>💡 반짝반짝 패턴 게임</h1>
            <p class="welcome-msg">환영합니다, <span id="display-nickname"></span>님!</p>
            <div class="menu-buttons">
                <button id="play-mode-btn" class="btn btn-primary btn-large">🎮 퍼즐 풀기</button>
                <button id="create-mode-btn" class="btn btn-secondary btn-large">🎨 패턴 만들기</button>
                <button id="load-pattern-btn" class="btn btn-tertiary btn-large">📂 패턴 불러오기</button>
                <button id="ranking-btn" class="btn btn-tertiary btn-large">🏆 명예의 전당</button>
                <button id="settings-btn" class="btn btn-tertiary btn-large">⚙️ 설정</button>
            </div>
        </div>
    </div>

    <!-- 설정 화면 -->
    <div id="settings-screen" class="screen">
        <div class="screen-content">
            <h2>⚙️ 설정</h2>
            <div class="settings-group">
                <label>격자 크기</label>
                <div class="grid-size-selector">
                    <button class="size-btn" data-size="3">3×3</button>
                    <button class="size-btn" data-size="4">4×4</button>
                    <button class="size-btn active" data-size="5">5×5</button>
                    <button class="size-btn" data-size="6">6×6</button>
                    <button class="size-btn" data-size="7">7×7</button>
                </div>
            </div>
            <div class="settings-group">
                <label>소리 테마</label>
                <div class="sound-theme-selector">
                    <button class="theme-btn active" data-theme="electronic">🔊 전자음</button>
                    <button class="theme-btn" data-theme="arcade">🕹️ 게임 효과음</button>
                    <button class="theme-btn" data-theme="animal">🐾 동물 소리</button>
                </div>
            </div>
            <div class="settings-group">
                <label>소리 볼륨</label>
                <input type="range" id="volume-slider" min="0" max="100" value="50">
                <span id="volume-display">50%</span>
            </div>
            <button id="settings-back-btn" class="btn btn-primary">확인</button>
        </div>
    </div>

    <!-- 게임 화면 -->
    <div id="game-screen" class="screen">
        <div class="game-header">
            <button id="game-back-btn" class="btn btn-small">← 메뉴</button>
            <div class="game-info">
                <span id="game-mode-label" class="mode-label">퍼즐 풀기</span>
                <span id="grid-size-label" class="size-label">5×5</span>
            </div>
            <div class="game-stats">
                <div class="stat">
                    <span class="stat-label">이동</span>
                    <span id="move-count" class="stat-value">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">시간</span>
                    <span id="timer" class="stat-value">00:00</span>
                </div>
            </div>
        </div>
        <div id="game-grid" class="game-grid"></div>
        <div class="game-actions">
            <button id="reset-btn" class="btn btn-secondary">🔄 초기화</button>
            <button id="auto-solve-btn" class="btn btn-tertiary">🤖 자동 풀기</button>
            <button id="guide-btn" class="btn btn-tertiary">📘 가이드</button>
            <button id="save-pattern-btn" class="btn btn-tertiary" style="display:none;">💾 패턴 저장</button>
        </div>
    </div>

    <!-- 클리어 모달 -->
    <div id="clear-modal" class="modal">
        <div class="modal-content">
            <h2>🎉 축하합니다!</h2>
            <p>모든 불을 껐습니다!</p>
            <div class="clear-stats">
                <div class="clear-stat">
                    <span class="clear-stat-label">이동 횟수</span>
                    <span id="clear-moves" class="clear-stat-value">0</span>
                </div>
                <div class="clear-stat">
                    <span class="clear-stat-label">소요 시간</span>
                    <span id="clear-time" class="clear-stat-value">00:00</span>
                </div>
                <div class="clear-stat">
                    <span class="clear-stat-label">최종 점수</span>
                    <span id="clear-score" class="clear-stat-value highlight">0</span>
                </div>
            </div>
            <div class="modal-buttons">
                <button id="clear-retry-btn" class="btn btn-primary">다시 하기</button>
                <button id="clear-menu-btn" class="btn btn-secondary">메뉴로</button>
            </div>
        </div>
    </div>

    <!-- 패턴 저장 모달 -->
    <div id="save-modal" class="modal">
        <div class="modal-content">
            <h2>💾 패턴 저장</h2>
            <label for="pattern-name-input">패턴 이름</label>
            <input type="text" id="pattern-name-input" maxlength="30" placeholder="패턴 이름을 입력하세요...">
            <div class="modal-buttons">
                <button id="save-confirm-btn" class="btn btn-primary">저장</button>
                <button id="save-md-btn" class="btn btn-secondary">📄 .md 파일로 저장</button>
                <button id="save-cancel-btn" class="btn btn-tertiary">취소</button>
            </div>
        </div>
    </div>

    <!-- 패턴 불러오기 모달 -->
    <div id="load-modal" class="modal">
        <div class="modal-content">
            <h2>📂 패턴 불러오기</h2>
            <div id="pattern-list" class="pattern-list">
                <p class="empty-msg">저장된 패턴이 없습니다.</p>
            </div>
            <div class="modal-buttons">
                <button id="load-file-btn" class="btn btn-secondary">📄 .md 파일에서 불러오기</button>
                <button id="load-cancel-btn" class="btn btn-tertiary">닫기</button>
            </div>
            <input type="file" id="load-file-input" accept=".md" style="display:none;">
        </div>
    </div>

    <!-- 랭킹 화면 -->
    <div id="ranking-screen" class="screen">
        <div class="screen-content">
            <h2>🏆 명예의 전당</h2>
            <div class="ranking-filter">
                <button class="filter-btn active" data-filter="all">전체</button>
                <button class="filter-btn" data-filter="3">3×3</button>
                <button class="filter-btn" data-filter="4">4×4</button>
                <button class="filter-btn" data-filter="5">5×5</button>
                <button class="filter-btn" data-filter="6">6×6</button>
                <button class="filter-btn" data-filter="7">7×7</button>
            </div>
            <div id="ranking-list" class="ranking-list">
                <p class="empty-msg">아직 기록이 없습니다.</p>
            </div>
            <button id="ranking-back-btn" class="btn btn-primary">돌아가기</button>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
